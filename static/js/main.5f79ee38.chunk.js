(this.webpackJsonpt3=this.webpackJsonpt3||[]).push([[0],{136:function(e,t,n){},148:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},186:function(e,t,n){},216:function(e,t,n){},347:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(24),r=n.n(a),i=(n(181),n(27)),o=n(354),l=n(358),j=(n(182),n(6)),u=function(){return Object(j.jsx)("div",{className:"header-container",children:Object(j.jsx)(o.a,{ghost:!1,onBack:function(){return window.history.back()},title:"Fly Traker",subTitle:"have everything under control in one place",children:Object(j.jsxs)(l.b,{size:"small",column:3,children:[Object(j.jsx)(l.b.Item,{label:"Created",children:"Lucas Zalaquett"}),Object(j.jsx)(l.b.Item,{label:"Entrega",children:"Tarea n\xb03"}),Object(j.jsx)(l.b.Item,{label:"Creation Time",children:"2017-01-10"})]})})})},b=function(){return Object(j.jsx)(u,{})},d=n(78),O=n(355),h=n(351),m=n(359),x=n(352),f=n(360),p=n(353),v=(n(186),function(e){var t=e.center,n=e.dataVuelos,c=e.positions,s=e.options,a=e.options2;return Object(j.jsx)(O.a,{title:"Mapa",id:"mapacard",children:Object(j.jsxs)(h.a,{center:t,zoom:4,scrollWheelZoom:!1,children:[Object(j.jsx)(m.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png"}),n.map((function(e,t){return Object(j.jsx)(x.a,{pathOptions:a,positions:[e.origin,e.destination]},"".concat(t,"-lineas"))})),c.map((function(e,t){return Object(j.jsx)(f.a,{center:[e.position[0],e.position[1]],pathOptions:s,radius:10,children:Object(j.jsx)(p.a,{children:e.code})},"".concat(t,"-markers"))}))]})})}),g=n(167),N=Object(g.io)("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),C=s.a.createContext(),y=N,I=function(e){var t=e.vuelos,n=Object(c.useContext)(C),s=Object(c.useState)([]),a=Object(i.a)(s,2),r=a[0],o=a[1],l=Object(c.useState)({code:"0000000"}),u=Object(i.a)(l,2),b=(u[0],u[1]),O=Object(c.useState)([{code:"000",position:[0,0]}]),h=Object(i.a)(O,2),m=h[0],x=h[1];return Object(c.useEffect)((function(){return n.on("POSITION",(function(e){if(b(e),-1===r.indexOf(e.code))o([].concat(Object(d.a)(r),[e.code])),x([].concat(Object(d.a)(m),[e]));else{var t=r.indexOf(e.code),n=m;n[t]=e,x(n)}})),function(){n.off("POSITION")}}),[m,r]),Object(j.jsx)("div",{children:Object(j.jsx)(v,{center:[-33.270374,-70.661969],options:{color:"blue"},options2:{color:"red"},positions:m,dataVuelos:t})})},S=(n(216),n(356)),T=n(357),F=n(70),k=(n(136),function(e){e.userName;var t=e.handlesubbmit;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Coloque un nombre de usuario para activar el chat"}),Object(j.jsxs)(S.a,{name:"basic",onFinish:t,layout:"inline",children:[Object(j.jsx)(S.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(j.jsx)(T.a,{})}),Object(j.jsx)(S.a.Item,{children:Object(j.jsx)(F.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})}),L=function(e){var t=e.mensajes,n=e.userName,s=e.handlesubbmit,a=e.isLogueado,r=e.handleMsg,o=Object(c.useRef)(null),l=S.a.useForm(),u=Object(i.a)(l,1)[0];Object(c.useEffect)((function(){o.current&&o.current.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight,behavior:"smooth"})}))}),[]);return Object(j.jsxs)(O.a,{title:"Chat",id:"chat-card",children:[Object(j.jsx)("div",{className:"mensajes-box",ref:o,children:a&&t.map((function(e,t){return Object(j.jsxs)("div",{children:[Object(j.jsxs)("h5",{className:e.name===n?"self-msg-username":"other-msg-username",children:[e.name," a las ",e.date,": "]}),Object(j.jsx)("p",{className:e.name===n?"self-msg":"other-msg",children:e.message},"".concat(t,"-m"))]})}))}),a?Object(j.jsx)("div",{className:"input-form",children:Object(j.jsxs)(S.a,{form:u,name:"basic",onFinish:function(e){r(e),u.resetFields()},layout:"inline",allowClear:!0,children:[Object(j.jsx)(S.a.Item,{name:"message",className:"input.fild",children:Object(j.jsx)(T.a,{placeholder:"escribe un mensaje"})}),Object(j.jsx)(S.a.Item,{children:Object(j.jsx)(F.a,{type:"secondary",htmlType:"submit",children:"Send"})})]})}):Object(j.jsx)(k,{userName:n,handlesubbmit:s})]})},w=function(){var e=Object(c.useContext)(C),t=Object(c.useState)([]),n=Object(i.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(""),o=Object(i.a)(r,2),l=o[0],u=o[1],b=Object(c.useState)(!1),O=Object(i.a)(b,2),h=O[0],m=O[1],x=S.a.useForm(),f=Object(i.a)(x,1)[0];Object(c.useEffect)((function(){return e.on("CHAT",(function(e){a([].concat(Object(d.a)(s),[e]))})),function(){e.off("CHAT")}}),[s]);return Object(j.jsx)("div",{children:Object(j.jsx)(L,{mensajes:s,userName:l,handlesubbmit:function(e){u(e.username),m(!0)},isLogueado:h,handleMsg:function(t){e.emit("CHAT",{name:l,message:t.message}),f.resetFields()},form:f})})},H=n(71),E=(n(148),function(e){var t=e.info;return Object(j.jsxs)(O.a,{title:t.code,className:"card-vuelo",children:[Object(j.jsx)("h3",{children:t.airline}),Object(j.jsx)("h3",{children:t.plane}),Object(j.jsxs)("h3",{children:[t.seats," asientos"]}),Object(j.jsx)("ul",{children:t.passengers.map((function(e,t){return Object(j.jsxs)("li",{children:[e.name,", edad: ",e.age]},"".concat(t,"-pasajeros"))}))})]})}),M=function(e){var t=e.data,n=e.handleClick;return Object(j.jsxs)(O.a,{title:"Vuelos",children:[Object(j.jsx)(F.a,{onClick:n,className:"btn-cargar",children:"cargar vuelos"}),Object(j.jsx)(H.a,{children:t.map((function(e,t){return Object(j.jsx)(E,{info:e},"".concat(t,"-card-vuelo"))}))})]})},P=function(e){var t=e.vuelos,n=e.setVuelos,s=Object(c.useContext)(C);return Object(j.jsx)(M,{data:t,handleClick:function(e){return s.emit("FLIGHTS",""),s.on("FLIGHTS",(function(e){n(e),console.log(t)})),function(){s.off("FLIGHTS")}}})},A=n(172),V=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(j.jsx)(C.Provider,{value:y,children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(b,{}),Object(j.jsxs)("div",{className:"body",children:[Object(j.jsx)("div",{className:"map-container",children:Object(j.jsx)(I,{vuelos:n})}),Object(j.jsx)("div",{className:"chat-container",children:Object(j.jsx)(w,{})}),Object(j.jsx)("div",{className:"vuelos-container",children:Object(j.jsx)(P,{vuelos:n,setVuelos:s})})]}),Object(j.jsx)("div",{children:Object(j.jsx)(A.Footer,{style:{textAlign:"center"},children:"Creado por Lucas Zalaquett para la tarea 3 de taller de integraci\xf3n"})})]})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,361)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};r.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(V,{})}),document.getElementById("root")),q()}},[[347,1,2]]]);
//# sourceMappingURL=main.5f79ee38.chunk.js.map